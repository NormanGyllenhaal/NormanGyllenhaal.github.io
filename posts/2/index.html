
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Hi, I’m Yang Peng</title>
  <meta name="author" content="Yang Peng">

   
  <meta name="description" content="">
  
  <meta name="keywords" content="">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://yeangpeng.tech/posts/2">
  <link href="/favicon.png" rel="icon">
  <link href='http://fonts.googleapis.com/css?family=Quicksand:300,400' rel='stylesheet' type='text/css'>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300' rel='stylesheet' type='text/css'>
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="Hi, I’m Yang Peng" type="application/atom+xml">
  <script src="/js/jquery.js"></script>
  <script src="/js/bootstrap-collapse.js"></script>
  <script src="/js/modernizr-2.0.js"></script>
  <script src="/js/octopress.js" type="text/javascript"></script>
  <script src="/js/application.js"></script>
  <a href="https://github.com/NormanGyllenhaal"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-42595764-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <div class="navbar navbar-inverse navbar-static-top">
  	<div class="navbar-inner">
  	  <div class="container">
        <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
          <span class="fui-menu-24"></span>
        </a>
  	  	<div class="nav-collapse collapse navbar-responsive-collapse" style="height:0;">
  	      <ul class="nav">
    
        <li ><a href="/index.html">Blog</a></li>
    
        <li ><a href="/blog/archives/index.html">Archives</a></li>
    
        <li ><a href="/about/index.html">About</a></li>
    
</ul>

<ul class="nav pull-right">
    
    <li><a href="http://github.com/NormanGyllenhaal" title="Github Profile"><i class="icon-github-sign social-navbar"></i></a></li>
    
    
    
    <li><a href="http://linkedin.com/in/鹏-杨-b78030109" title="Linkedin Profile"><i class="icon-linkedin-sign social-navbar"></i></a></li>
    
    
    <li><a href="http://twitter.com/yangpeng_tech" title="Twitter Profile"><i class="icon-twitter-sign social-navbar"></i></a></li>
    
    
    
    <li><a href="http://facebook.com/peng.yang.37669" title="Facebook Profile"><i class="icon-facebook-sign social-navbar"></i></a></li>
    
    

    
    <li><a href="mailto:me@yangpeng.tech" title="Email"><i class="icon-envelope social-navbar"></i></a></li>
    
</ul>

  	    </div>
  	  </div>
  	</div>
  </div>
  <div class="container" id="main">
      <div class="row-fluid">
        <div id="content">
          <div class="jumbotron">
  <div class="container">
    
      Hi, I’m Yang Peng
    
    <h3 class="tagline">
      
        Here are some thoughts of mine
      
    </h3>
  </div>
</div>


<div class="blog-index">
  
  
  
    <article>
      

  <div class="row-fluid">
    <div class="span2 post-meta">
	  <h5 class="date-time">



















<i class="icon-calendar-empty"></i>  2014-05-22 13:53</h5>
          <div class="row-fluid">
          
          </div>
          
          <div class="row-fluid">
          
          <a href="/blog/categories/yaml/"><span class="badge">yaml</span></a>
          
          </div>
          
    </div>
    <div class="span10 post-container">
      <h1 class="link"><a href="/blog/2014/05/22/yaml-introduce/">yaml入门笔记</a></h1>
      <p><strong>Wiki：</strong></p>

<p>YAML（IPA: /ˈjæməl/，尾音类似camel骆驼）是一个可读性高，用来表达资料序列的格式。
YAML参考了其他多种语言，包括：XML、C语言、Python、Perl以及电子邮件格式RFC2822。
Clark Evans在2001年在首次发表了这种语言[1] ，
另外Ingy döt Net与Oren Ben-Kiki也是这语言的共同设计者。
目前已经有数种编程语言或脚本语言支援（或者说解析）这种语言。</p>

<p>YAML是”YAML Ain’t a Markup Language”（YAML不是一种置标语言）的递回缩写。
在开发的这种语言时，YAML 的意思其实是：”Yet Another Markup Language”（仍是一种置标语言），
但为了强调这种语言以数据做为中心，而不是以置标语言为重点，而用返璞词重新命名。</p>

<p>最新版本为1.2，官方说明地址： <a href="http://www.yaml.org/spec/1.2/spec.html">http://www.yaml.org/spec/1.2/spec.html</a></p>

<p>使用方式：作为配置文件，数据交换格式，序列化对象存储，测试数据文件，</p>

<p>一个简单的示例：
      
       <a href="/blog/2014/05/22/yaml-introduce/">Read on &rarr;</a> 
    </div>
  </div>



    </article>
    
    <hr>
    
  
  
    <article>
      

  <div class="row-fluid">
    <div class="span2 post-meta">
	  <h5 class="date-time">



















<i class="icon-calendar-empty"></i>  2014-05-19 14:01</h5>
          <div class="row-fluid">
          
          </div>
          
          <div class="row-fluid">
          
          <a href="/blog/categories/xpath/"><span class="badge">xpath</span></a>
          
          </div>
          
    </div>
    <div class="span10 post-container">
      <h1 class="link"><a href="/blog/2014/05/19/xpath-introduce/">xpath入门笔记</a></h1>
      <h3>Wiki</h3>

<p>XPath即为XML路径语言（XML Path Language），它是一种用来确定XML文档中某部分位置的语言。
XPath基于XML的树状结构，提供在数据结构树中找寻节点的能力。
起初XPath的提出的初衷是将其作为一个通用的、介于XPointer与XSL间的语法模型。
但是XPath很快的被开发者采用来当作小型查询语言。</p>

<p>W3C网址： <a href="http://www.w3schools.com/XPath/">http://www.w3schools.com/XPath/</a></p>

<h3>表示法</h3>

<p>最常见的XPath表达式是路径表达式（XPath这一名称的另一来源）。</p>

<p>路径表达式是从一个XML节点（当前的上下文节点）到另一个节点、或一组节点的书面步骤顺序。
这些步骤以“／”字符分开，每一步有三个构成成分：
      
       <a href="/blog/2014/05/19/xpath-introduce/">Read on &rarr;</a> 
    </div>
  </div>



    </article>
    
    <hr>
    
  
  
    <article>
      

  <div class="row-fluid">
    <div class="span2 post-meta">
	  <h5 class="date-time">



















<i class="icon-calendar-empty"></i>  2014-04-26 10:55</h5>
          <div class="row-fluid">
          
          </div>
          
          <div class="row-fluid">
          
          <a href="/blog/categories/rabbitmq/"><span class="badge">rabbitmq</span></a>
          
          </div>
          
    </div>
    <div class="span10 post-container">
      <h1 class="link"><a href="/blog/2014/04/26/rabbitmq-server/">CentOS6.4安装rabbitmq-server</a></h1>
      <h3>在 CentOS 6.4上安装python</h3>

<p>自己手动安装python2.7.5，不要动系统上面其他的版本</p>

<p><strong>1,先安装GCC，用如下命令yum install gcc gcc-c++</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yum install zlib
</span><span class='line'>yum install zlib-devel</span></code></pre></td></tr></table></div></figure>


<p><strong>2,下载 <a href="https://www.python.org/ftp/python/2.7.5/Python-2.7.5.tgz">python-2.7.5.tar.gz</a> 文件，修改文件权限</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>chmode +x python-7.5.tar.gz</span></code></pre></td></tr></table></div></figure>


<p><strong>3,解压tar文件</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>tar -xzvf python-2.7.5.tar.gz</span></code></pre></td></tr></table></div></figure>


<p><strong>4,编辑Setup.dist</strong></p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd python-2.7.5
</span><span class='line'>vim Python-2.7.5/Modules/Setup.dist</span></code></pre></td></tr></table></div></figure>


<p>找到
      
       <a href="/blog/2014/04/26/rabbitmq-server/">Read on &rarr;</a> 
    </div>
  </div>



    </article>
    
    <hr>
    
  
  
    <article>
      

  <div class="row-fluid">
    <div class="span2 post-meta">
	  <h5 class="date-time">



















<i class="icon-calendar-empty"></i>  2014-04-24 10:47</h5>
          <div class="row-fluid">
          
          </div>
          
          <div class="row-fluid">
          
          <a href="/blog/categories/归并排序/"><span class="badge">归并排序</span></a>
          
          </div>
          
    </div>
    <div class="span10 post-container">
      <h1 class="link"><a href="/blog/2014/04/24/merge-sort/">归并排序中对小数组采用插入排序</a></h1>
      <p>纯归并排序的复杂度为O(nlgn)，而纯插入排序的时间复杂度为O(n<sup>2</sup>)。数据量很大的时候采用归并排序。</p>

<p>但是在n较小的时候插入排序可能运行的会更快点。因此在归并排序中当子问题变得足够小时，
采用插入排序来使得递归的叶子变粗可以加快排序速度。那么这个足够小到底怎么去衡量呢？ 请看下面：</p>

<p>这么几个我不证明了，比较简单：</p>

<ol>
<li>插入排序最坏情况下可以在O(nk)时间内排序每个长度为k的n/k个子列表
<em>. 在最坏情况下可在O(nlg(n/k))的时间内合并这些子表
</em>. 修订后的算法的最坏情况运行时间复杂度是O(nk + nlg(n/k))</li>
</ol>


<p>那么，O(nk+nlg(n/k))=O(nlgn).只能最大是k=O(lgn).等式左边中第一项是高阶项。
k如果大于lgn,则比归并排序复杂度大了。
左边可以写成nk+nlgn-nlgk，k等于lgn时，就是2nlgn-nlglgn.忽略恒定系数，则与归并排序是一样的。
最后结论： k &lt; lg(n)的时候，使用插入排序。
      
       <a href="/blog/2014/04/24/merge-sort/">Read on &rarr;</a> 
    </div>
  </div>



    </article>
    
    <hr>
    
  
  
    <article>
      

  <div class="row-fluid">
    <div class="span2 post-meta">
	  <h5 class="date-time">



















<i class="icon-calendar-empty"></i>  2014-04-13 19:02</h5>
          <div class="row-fluid">
          
          </div>
          
          <div class="row-fluid">
          
          <a href="/blog/categories/linux/"><span class="badge">linux</span></a>
          
          </div>
          
    </div>
    <div class="span10 post-container">
      <h1 class="link"><a href="/blog/2014/04/13/centos-yum/">centos6更新yum源</a></h1>
      <h4>先备份</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>mv /etc/yum.repos.d/CentOS-Base.repo<span class="o">{</span>,.bak<span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<h4>修改CentOS-Base.repo</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c"># CentOS-Base.repo</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># The mirror system uses the connecting IP address of the client and the</span>
</span><span class='line'><span class="c"># update status of each mirror to pick mirrors that are updated to and</span>
</span><span class='line'><span class="c"># geographically close to the client. You should use this for CentOS updates</span>
</span><span class='line'><span class="c"># unless you are manually picking other mirrors.</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c"># If the mirrorlist= does not work for you, as a fall back you can try the </span>
</span><span class='line'><span class="c"># remarked out baseurl= line instead.</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'><span class="c">#</span>
</span><span class='line'>
</span><span class='line'><span class="o">[</span>base<span class="o">]</span>
</span><span class='line'><span class="nv">name</span><span class="o">=</span>CentOS-<span class="nv">$releasever</span> - Base
</span><span class='line'><span class="c">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=os</span>
</span><span class='line'><span class="nv">baseurl</span><span class="o">=</span>http://mirrors.163.com/centos/<span class="nv">$releasever</span>/os/<span class="nv">$basearch</span>/
</span><span class='line'><span class="nv">gpgcheck</span><span class="o">=</span>1
</span><span class='line'><span class="nv">gpgkey</span><span class="o">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6
</span><span class='line'>
</span><span class='line'><span class="c">#released updates </span>
</span><span class='line'><span class="o">[</span>updates<span class="o">]</span>
</span><span class='line'><span class="nv">name</span><span class="o">=</span>CentOS-<span class="nv">$releasever</span> - Updates
</span><span class='line'><span class="c">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=updates</span>
</span><span class='line'><span class="nv">baseurl</span><span class="o">=</span>http://mirrors.163.com/centos/<span class="nv">$releasever</span>/updates/<span class="nv">$basearch</span>/
</span><span class='line'><span class="nv">gpgcheck</span><span class="o">=</span>1
</span><span class='line'><span class="nv">gpgkey</span><span class="o">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6
</span><span class='line'>
</span><span class='line'><span class="c">#additional packages that may be useful</span>
</span><span class='line'><span class="o">[</span>extras<span class="o">]</span>
</span><span class='line'><span class="nv">name</span><span class="o">=</span>CentOS-<span class="nv">$releasever</span> - Extras
</span><span class='line'><span class="c">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=extras</span>
</span><span class='line'><span class="nv">baseurl</span><span class="o">=</span>http://mirrors.163.com/centos/<span class="nv">$releasever</span>/extras/<span class="nv">$basearch</span>/
</span><span class='line'><span class="nv">gpgcheck</span><span class="o">=</span>1
</span><span class='line'><span class="nv">gpgkey</span><span class="o">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6
</span><span class='line'>
</span><span class='line'><span class="c">#additional packages that extend functionality of existing packages</span>
</span><span class='line'><span class="o">[</span>centosplus<span class="o">]</span>
</span><span class='line'><span class="nv">name</span><span class="o">=</span>CentOS-<span class="nv">$releasever</span> - Plus
</span><span class='line'><span class="c">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=centosplus</span>
</span><span class='line'><span class="nv">baseurl</span><span class="o">=</span>http://mirrors.163.com/centos/<span class="nv">$releasever</span>/centosplus/<span class="nv">$basearch</span>/
</span><span class='line'><span class="nv">gpgcheck</span><span class="o">=</span>1
</span><span class='line'><span class="nv">enabled</span><span class="o">=</span>0
</span><span class='line'><span class="nv">gpgkey</span><span class="o">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6
</span><span class='line'>
</span><span class='line'><span class="c">#contrib - packages by Centos Users</span>
</span><span class='line'><span class="o">[</span>contrib<span class="o">]</span>
</span><span class='line'><span class="nv">name</span><span class="o">=</span>CentOS-<span class="nv">$releasever</span> - Contrib
</span><span class='line'><span class="c">#mirrorlist=http://mirrorlist.centos.org/?release=$releasever&amp;arch=$basearch&amp;repo=contrib</span>
</span><span class='line'><span class="nv">baseurl</span><span class="o">=</span>http://mirrors.163.com/centos/<span class="nv">$releasever</span>/contrib/<span class="nv">$basearch</span>/
</span><span class='line'><span class="nv">gpgcheck</span><span class="o">=</span>1
</span><span class='line'><span class="nv">enabled</span><span class="o">=</span>0
</span><span class='line'><span class="nv">gpgkey</span><span class="o">=</span>file:///etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-6
</span></code></pre></td></tr></table></div></figure>


<p>接下来我们来更新下yum：
      
       <a href="/blog/2014/04/13/centos-yum/">Read on &rarr;</a> 
    </div>
  </div>



    </article>
    
    <hr>
    
  
  
    <article>
      

  <div class="row-fluid">
    <div class="span2 post-meta">
	  <h5 class="date-time">



















<i class="icon-calendar-empty"></i>  2014-04-06 21:08</h5>
          <div class="row-fluid">
          
          </div>
          
          <div class="row-fluid">
          
          <a href="/blog/categories/servlet/"><span class="badge">servlet</span></a>
          
          </div>
          
    </div>
    <div class="span10 post-container">
      <h1 class="link"><a href="/blog/2014/04/06/servlet-filter/">servlet filter详解</a></h1>
      <p>在写一个springmvc项目中想对用户的请求进行拦截，只有登录用户才能访问资源。这时候可以使用到SpringMVC的拦截器Intercepter，但是这个只能局限在SpringMVC中使用，如果想更加通用一点，最好使用Servlet Filter实现这个需求。</p>

<p>本文将通过几个实际的例子展示下Servlet中的Filter的使用。</p>

<p><strong>1 我们为什么需要使用Filter？</strong></p>

<p>通常我们会使用session来保存登录用户的信息，通过从session中取出保存的属性值来判断用户是否登录，但是如果我们有大量的请求方法，每个人方法中都这样去判断就会有很多重复代码，将来我们想改动下逻辑，那得改动所有的请求方法实现，所以这个是不可取的。</p>

<p>这时候就是使用Servlet Filter的时候了，它是可插拔的，对于普通的action方法来讲是透明的。它会在执行其他方法之前或将结果返回给客户端之前来执行其他逻辑。</p>

<p>以下几种场景下我们会使用到Servlet Filter：</p>

<ul>
<li>将请求的参数写入日志文件</li>
<li>对于资源的访问进行统一的授权与验证</li>
<li>在请求到达实际Servlet之前格式化请求内容或请求头</li>
<li>压缩返回数据后发送给客户端</li>
<li>修改返回内容，增加一些cookie、header等信息
      
       <a href="/blog/2014/04/06/servlet-filter/">Read on &rarr;</a> 
    </div>
  </div>



    </article>
    
    <hr>
    
  
  
    <article>
      

  <div class="row-fluid">
    <div class="span2 post-meta">
	  <h5 class="date-time">



















<i class="icon-calendar-empty"></i>  2014-03-28 10:42</h5>
          <div class="row-fluid">
          
          </div>
          
          <div class="row-fluid">
          
          <a href="/blog/categories/sitemesh/"><span class="badge">sitemesh</span></a>
          
          </div>
          
    </div>
    <div class="span10 post-container">
      <h1 class="link"><a href="/blog/2014/03/28/sitemesh/">SiteMesh使用笔记</a></h1>
      <h3>简介</h3>

<p>SiteMesh的介绍就不多说了，主要是用来统一页面风格，减少重复编码的。</p>

<p>它定义了一个过滤器，然后把页面都加上统一的头部和底部。</p>

<p>在maven工程的pom.xml中加入SiteMesh依赖：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;dependency&gt;</span>
</span><span class='line'>    <span class="nt">&lt;groupId&gt;</span>opensymphony<span class="nt">&lt;/groupId&gt;</span>
</span><span class='line'>    <span class="nt">&lt;artifactId&gt;</span>sitemesh<span class="nt">&lt;/artifactId&gt;</span>
</span><span class='line'>    <span class="nt">&lt;version&gt;</span>2.4.2<span class="nt">&lt;/version&gt;</span>
</span><span class='line'><span class="nt">&lt;/dependency&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>过滤器定义：</h3>

<p>在web.xml中：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;filter&gt;</span>
</span><span class='line'>    <span class="nt">&lt;filter-name&gt;</span>sitemeshFilter<span class="nt">&lt;/filter-name&gt;</span>
</span><span class='line'>    <span class="nt">&lt;filter-class&gt;</span>com.opensymphony.sitemesh.webapp.SiteMeshFilter<span class="nt">&lt;/filter-class&gt;</span>
</span><span class='line'><span class="nt">&lt;/filter&gt;</span>
</span><span class='line'><span class="nt">&lt;filter-mapping&gt;</span>
</span><span class='line'>    <span class="nt">&lt;filter-name&gt;</span>sitemeshFilter<span class="nt">&lt;/filter-name&gt;</span>
</span><span class='line'>    <span class="nt">&lt;url-pattern&gt;</span>*.html<span class="nt">&lt;/url-pattern&gt;</span>
</span><span class='line'><span class="nt">&lt;/filter-mapping&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<h3>WEB-INF下新建decorators.xml文件：
      
       <a href="/blog/2014/03/28/sitemesh/">Read on &rarr;</a> 
    </div>
  </div>



    </article>
    
    <hr>
    
  
  
    <article>
      

  <div class="row-fluid">
    <div class="span2 post-meta">
	  <h5 class="date-time">



















<i class="icon-calendar-empty"></i>  2014-02-17 14:52</h5>
          <div class="row-fluid">
          
          </div>
          
          <div class="row-fluid">
          
          <a href="/blog/categories/jvm/"><span class="badge">jvm</span></a>
          
          </div>
          
    </div>
    <div class="span10 post-container">
      <h1 class="link"><a href="/blog/2014/02/17/jvm/">jvm调优</a></h1>
      <p><strong>首先看下jvm的常用设置参数</strong></p>

<ol>
<li>栈设置 <br/>
<code>-Xss:</code>调整栈大小</li>
<li>堆设置<br/>
<code>-Xms：</code>初始堆大小<br/>
<code>-Xmx：</code>最大堆大小<br/>
<code>-Xmn：</code>设置年轻代大小 <br/>
<code>-XX:NewRatio=n:</code>设置年轻代和老年代的比值。<br/>
<code>-XX:SurvivorRation=n</code>年轻代中Eden区与两个Suvivor区的比值。注意Survivor区中有两个。如3，表示Eden:Survivor=3:2,一个Survivor区占整个年轻代的1/5<br/>
<code>-XX:MaxTenuringThreshold=0:</code>设置垃圾最大年龄，如果设置为0的话，则年轻代对象不经过Survivor区，直接进入老年代。，对于老年代比较多的应用，可以提高效率<br/>
<code>-XX:HeapDumpOnOutOfMemoryError</code> OOM时导出堆到文件<br/>
<code>-XX:HeapDumpPath</code> 导出OOM的路径<br/>
<code>-XX:OnOutOfMemoryError</code> 在OOM时，执行一个脚本</li>
<li>永久区设置<br/>
<code>-XX:PermSize</code><br/>
<code>-XX:MaxPermSize</code></li>
<li>收集器设置 <br/>
<code>-XX:+UseSerialGC:</code>设置串行收集器 新生代使用复制算法，老年代使用标记压缩算法<br/>
<code>-XX:+UseParalledlGC:</code>设置并行收集器 老年代依然使用串行回收<br/>
<code>-XX:+UseParalledlOldGC:</code>设置并行年老代收集器<br/>
<code>-XX:+UseConcMarkSweepGC:</code>设置并发收集器 在老年代应用 使用标记-清除算法，新生代会使用并行回收器

<ul>
<li>并行收集器设置<br/>
<code>-XX:ParallelGCTheads=n:</code>设置并行收集器收集是使用的CPU数。并行收集线程数<br/>
<code>-XX:MaxGCPauseMillis=n:</code>设置并行收集最大暂停时间<br/>
<code>-XX:GCTimeRatio=n:</code>设置垃圾回收时间占程序运行时间的百分比。公式为1/(1+n)</li>
<li>并发收集器设置<br/>
<code>-XX:GMSFullGCsBeforeCompaction:</code>此值设置运行多少次GC以后对内存空间进行压缩、整理<br/>
<code>-XX:+UseCMSCompactAtFullCollection</code> 打开老年代压缩，可能会影响性能，但是可以消除碎片<br/>
<code>-XX:+CMSInitiatingOccupancyFraction</code> 设置触发GC的阀值，对堆空间占用大小<br/>
<code>-XX:ParallelCMSThreads</code> 设定CMS的线程数量，一般为可用CPU数量<br/>
<code>-XX:+CMSClassUnloadingEnabled</code> 允许对类元数据进行回收<br/>
<code>-XX:CMSInitiatingPermOccupancyFraction：</code>当永久区占用率达到这一百分比时，启动CMS回收<br/>
<code>-XX:UseCMSInitiatingOccupancyOnly：</code>表示只在到达阀值的时候，才进行CMS回收</li>
</ul>
</li>
<li>垃圾回收统计信息<br/>
<code>-XX:+PrintGC</code> 打印GC信息<br/>
<code>-XX:+PrintGCDetails</code> 打印GC详细信息<br/>
<code>-XX:+PrintGCTimeStamps</code> 打印时间戳<br/>
<code>-XX:+PrintHeapAtGC</code> 每一次GC以后，都打印堆信息<br/>
<code>-XX:+TraceClassLoading</code> 监控类加载<br/>
<code>-XX:+PrintClassHistogram</code> 按下Ctrl+Break后，打印所有类信息<br/>
<code>-Xloggc:filename</code></li>
<li>锁设置

<ul>
<li>偏向锁<br/>
<code>-XX:+UseBiasedLocking</code>  –jdk1.6 默认启用 在竞争激烈的场合，偏向锁会增加系统负担
只要没有竞争，获得偏向锁的线程，在将来进入同步块，不需要做同步
当其他线程请求相同的锁时，偏向模式结束<br/>
<code>-XX:BiasedLockingStartupDelay=0</code> 偏向锁开启时间<br/>
<code>-XX:-UseBiasedLocking</code> 移除偏向锁</li>
<li>轻量锁<br/>
如果轻量级锁失败，表示存在竞争，升级为重量级锁（常规锁），在没有锁竞争的前提下，减少传统锁使用OS互斥量产生的性能损耗，在竞争激烈时，轻量级锁会多做很多额外操作，导致性能下降</li>
<li>自旋锁<br/>
当竞争存在时，如果线程可以很快获得锁，那么可以不在OS层挂起线程，让线程做几个空操作（自旋）
JDK1.6中-XX:+UseSpinning开启
JDK1.7中，去掉此参数，改为内置实现
如果同步块很长，自旋失败，会降低系统性能
如果同步块很短，自旋成功，节省线程挂起切换时间，提升系统性能</li>
<li>内置于JVM中的获取锁的优化方法和获取锁的步骤<br/>
–偏向锁可用会先尝试偏向锁
–轻量级锁可用会先尝试轻量级锁
–以上都失败，尝试自旋锁
–再失败，尝试普通锁，使用OS互斥量在操作系统层挂起</li>
</ul>
</li>
</ol>


<p><strong>下面看下常用设置经验</strong></p>


      
       <a href="/blog/2014/02/17/jvm/">Read on &rarr;</a> 
    </div>
  </div>



    </article>
    
  
  <div class="pagination">
    

    
    <a class="next" href="1">Newer &rarr;</a>
    
  </div>
</div>


        </div>
      </div>
      <div class="row-fluid">
        <footer class="footer-page" role="contentinfo">
          <p>
  Copyright &copy; 2016 - Yang Peng -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span> - Theme by <a href="http://alexgaribay.com">Alex Garibay</a>
</p>


        </footer>
      </div>
  </div>
  

<script type="text/javascript">
      var disqus_shortname = 'thecodedungeon';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
